# 高级程序设计课程大作业第二阶段实验报告

#### 191810140沈炫辰

### 一、环境

图形界面：Qt

编译器：Qt6.0.4MINGW

IDE:Qt Creator5.0.1

系统：windows10

语言：C++

实验内容：塔防游戏

### 二、我第一阶段完成了什么

1.完成了对游戏的整体框架的较为随意的策划，见design of the game.md

2.实现了游戏基本运行流程（如金钱变动、关卡地图、敌军生成、大本营生命值变动、塔基位置、敌人行军路线等，除输赢外，因为输赢涉及到多关卡选择打算放到后面完成）

3.实现了基础防御塔（只有近战远程各一种）的建造（点击）和攻击范围显示

4.实现了近战防御塔和敌人的互相攻击（利用game类在顶层管理，将指令传达到tower类和enemy类）

### 三、第一阶段对第二阶段的想法

1.实现远程塔的攻击和弹道

2.将关卡参数封装起来，做多关卡，完成游戏胜利与失败的判定，加强游戏性

3.做一些机制更酷的防御塔，实现防御塔的升级界面

4.做一些有特殊技能的难缠的敌人

5.制作动画？

### 四、我第二阶段完成了什么（针对上面的list）

首先，关于游戏的人话（非代码，给玩家看的）部分写了一个文档，见document.md

1.实现了多种远程塔及其发射的不同arrow（弓箭、魔法弹、石头、迫击炮弹）。

2.可以用.txt文件按照一定的语法自定义关卡，但是没有完成敌人生成出现的部分（第一没有要求，第二时间不够了...这可能是下一阶段第一个要完成的事，这很重要，没有敌人信息关卡不完整）。因为要求没有，没有完成胜负的判定和多关卡机制。没有完成飞行敌人的路线，因为觉得没必要，就是一些机械的画点工作。让飞行敌人成为辅助大军的部队挺好的。

3.实现了防御塔的建造和升级选择界面，并且实现了炮弹溅射（迫击炮）、生成小塔（士兵阵地）、不能攻击飞行单位、远程攻击、近战攻击、不被攻击但攻击范围内敌人的陷阱塔等防御塔的机制。整体比较满意。

4.实现了敌人远程攻击、投石、越塔、飞行、治疗、增益等机制。整体比较满意。

5.好看的动画什么的太难了...

6.由于对cpp的认识更加深入，重构了第一阶段的部分代码，使其更加具有可扩展性和可读性，让以后给游戏添加枝节更为方便（也即基本不用考虑之前的代码，直接用接口即可）。

7.关于mission关卡的.txt文件的格式，见mission.md

### 五、下一阶段展望

1.实现关卡的敌人按照预设的时间出现（当前是每隔一段时间出现一个）

2.实现更多种防御塔机制

3.完善一些塔的动画

4.实现多关卡，关卡选择，胜利与失败

5.修也许会有的bug（也不确定目前有没有，感觉偶尔会出现）

6.有空做一些更coooool的东西，比如关卡中的更多操作，防御塔的继续升级和定制，关卡奖励和科技树，新的防御塔解锁，提高游戏可玩性，增加剧情。

