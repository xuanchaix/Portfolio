# 高级程序设计课程大作业第三阶段实验报告

#### 191810140沈炫辰

### 一、环境

图形界面：Qt

编译器：Qt6.0.4MINGW

IDE:Qt Creator5.0.1

系统：windows10

语言：C++

实验内容：塔防游戏

### 二、我第二阶段完成了什么

首先，关于游戏的人话（非代码，给玩家看的）部分写了一个文档，见document.md

1.实现了多种远程塔及其发射的不同arrow（弓箭、魔法弹、石头、迫击炮弹）。

2.可以用.txt文件按照一定的语法自定义关卡，但是没有完成敌人生成出现的部分（第一没有要求，第二时间不够了...这可能是下一阶段第一个要完成的事，这很重要，没有敌人信息关卡不完整）。因为要求没有，没有完成胜负的判定和多关卡机制。没有完成飞行敌人的路线，因为觉得没必要，就是一些机械的画点工作。让飞行敌人成为辅助大军的部队挺好的。

3.实现了防御塔的建造和升级选择界面，并且实现了炮弹溅射（迫击炮）、生成小塔（士兵阵地）、不能攻击飞行单位、远程攻击、近战攻击、不被攻击但攻击范围内敌人的陷阱塔等防御塔的机制。整体比较满意。

4.实现了敌人远程攻击、投石、越塔、飞行、治疗、增益等机制。整体比较满意。

5.关于mission关卡的.txt文件的格式，见mission.md

### 三、第二阶段对第三阶段的想法

1.实现关卡的敌人按照预设的时间出现（当前是每隔一段时间出现一个）

2.实现更多种防御塔机制

3.完善一些塔的动画

4.实现多关卡，关卡选择，胜利与失败

5.修也许会有的bug（也不确定目前有没有，感觉偶尔会出现）

### 四、我第三阶段完成了什么（针对上面的list）

1.实现了在某一特定时刻出现某一种敌人的完全自由的敌军生成方法，融入到关卡的语法中，可以见mission.md的后面添加部分

2.3.由于助教传达了实验二完成得比较多的可以在实验三摸鱼一会儿，所以这些就偷懒不做了，这些都是码农苦功

4.没有实现多关卡，因为没要求，原因如上，实现了关卡的胜利与失败，胜利即所有的敌人都出现了并且地图上没有敌人（都被杀死或到终点了），失败即生命归零，两者都可以选择重新开始或者退出游戏。

5.可能还存在bug（关于heap方面的，应该是部分析构的问题），但是我跑了好几次release版本没出问题，就这样吧

6.关于实验要求提到的其他要求，图形化使用了qt；生命值、范围都已经在第一阶段完成；这一阶段添加了被将军buff的敌人的标记（蓝色的buffed字样），和敌人被攻击后会闪烁以示被击中。

### 五、感想和不足

1.一开始在实验的文档中给了两个参考的现成品游戏，但是我没有玩过明日方舟，所以基本上整个游戏的设计思路都是源自于我小时候特别喜欢玩的kingdom rush这个游戏。看着自己竟然也能做出越来越像kingdom rush的游戏，心里还是有不少自豪感的。

2.这算是第一次去独立完成一个从零开始的大项目了，不过进展并没有想象中的那么缓慢，大部分时候都是有激情去完成这个项目的，也很感谢一开始就给我推荐Qt的学长们，因为顺利的另外一个原因大概就是Qt实在是太好用了，速度也不错，我以前曾经用过python的图形化游戏库pygame特别卡，而且Qt的文档很清晰，完全可以自学明白，不枉我花费一些时间来熟悉。

3.第一次做经验还是不足，各种乱用指针（可能是C的习惯也导致了heap的报错，C++需要自己管理内存，没有垃圾回收虽然可以个性化，而且速度快空间占用小，但实在是太麻烦了），代码也不是很规范，一些不改变类的成员的函数没有写const，甚至还有偷懒不想写get成员值的函数而直接把成员设为public。在前段编程途中出现过很多次，在后段已经逐渐改正。

